
<!DOCTYPE html>
<html>
<head>
    <title>raw data pie</title>
    <link rel="stylesheet" type="text/css" href="../css/style.css">
        <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
        <link rel="stylesheet" type="text/css" href="../css/buttons.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <div id="raw_data_pie" style="width: 800px; height: 400px; text-align: center; margin: auto"></div>
    <form style="text-align: center;">
        <label id='lblSelect'>
        <select id="selectPointOfInterest" style="margin: 0; padding: 1%" onchange="rawpieShow(this.options[this.options.selectedIndex].innerHTML);">
            <option>tian_FKDO230350531-1A_AHWN3FDSX5-new_L1</option>
				<option>tian_FKDO230350531-1A_BHWC2NDSX5-new_L2</option>
				<option>songshu_FKDO230350530-1A_BHWC2NDSX5-new_L1</option>
				<option>tianshu_FKDO230350529-1A_BHWC2NDSX5-new_L1</option>
				<option>tianzi_FKDO230350528-1A_BHWC2NDSX5-new_L2</option>
        </select>
        </label>&nbsp;&nbsp;
        <button type="button" id="pageUp" class="button button-normal button-border button-circle">
            <i class="icon-circle-arrow-up"></i>
        </button>
        <button type="button" id="pageDown" class="button button-normal button-border button-circle">
            <i class="icon-circle-arrow-down"></i>
        </button>
    </form>
        <script type="text/javascript" src="../js/jquery-1.4.2.min.js"></script>
    <script type="text/javascript" src="../js/echarts.min.js"></script>
        <script type="text/javascript" src="../js/macarons.js"></script>
    <script id="asdsf" type="text/javascript">
        // change view function
        var rawpieShow = function(title1) {
            data_dict = {'tian_FKDO230350531-1A_AHWN3FDSX5-new_L1': {'Containing N': 2738, 'Adapter Related': 261806, 'Low Quality': 0, 'Clean Reads': 31341524}, 'tian_FKDO230350531-1A_BHWC2NDSX5-new_L2': {'Containing N': 15, 'Adapter Related': 2196497, 'Low Quality': 7, 'Clean Reads': 276676408}, 'tianzi_FKDO230350528-1A_BHWC2NDSX5-new_L2': {'Containing N': 17, 'Adapter Related': 2490674, 'Low Quality': 15, 'Clean Reads': 330388854}, 'songshu_FKDO230350530-1A_BHWC2NDSX5-new_L1': {'Containing N': 1111, 'Adapter Related': 2326779, 'Low Quality': 6, 'Clean Reads': 331353679}, 'tianshu_FKDO230350529-1A_BHWC2NDSX5-new_L1': {'Containing N': 1019, 'Adapter Related': 2273487, 'Low Quality': 7, 'Clean Reads': 307304948}} ;
            var classif = new Array();
            var data_if = new Array();
            for (var key in data_dict[title1]){
                classif.push(key);
                var tmp_push = Array();
                data_if.push({value: data_dict[title1][key], name: key});
            };
            var myChart = echarts.init(document.getElementById('raw_data_pie'), 'macarons');
            var plot_option = {
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    padding:[30,0,0,0],
                    data: classif
                },
                toolbox: {
                    show : true,
                    x : 700,
                    feature : {
                        mark : {
                            show: true,
                            title: {
                                mark : '辅助线开关',
                                markUndo : '删除辅助线',
                                markClear : '清空辅助线'
                            },
                            lineStyle : {
                                width : 2,
                                color : '#1e90ff',
                                type : 'dashed'
                            }
                        },
                        dataView : {show: true, readOnly: false},
                        magicType : {
                            show: true,
                            title: {
                                'pie': '饼图切换',
                                'funnel': '漏斗图切换'
                            },
                            type: ['pie', 'funnel'],
                            option: {
                                funnel: {
                                    x: '25%',
                                    width: '50%',
                                    funnelAlign: 'center',
                                    max: 1548
                                }
                            }
                        },
                        restore : {
                            show: true,
                            title: "还原"
                        },
                        saveAsImage : {
                            show: true,
                            pixelRatio: 7
                        }
                    }
                },
                title: {
                    text: "Classification of Raw Reads",
                    left: 'center'
                },
                calculable : true,
                series : [
                    {
                        name: title1,
                        hoverAnimation: true,
                        type:'pie',
                        radius : ['50%', '70%'],
                        itemStyle : {
                            normal : {
                                label : {
                                    show : true
                                },
                                labelLine : {
                                    show : true
                                }
                            },
                            emphasis : {
                                label : {
                                    show : true,
                                    position : 'center',
                                    textStyle : {
                                        fontSize : '25',
                                        fontWeight : 'bold'
                                    }
                                }
                            }
                        },
                        data: data_if
                    }
                ]
            };
            var plot_option = {
                title : {
                    text: title1,
                    x:'center'
                },
                tooltip : {
                    trigger: 'item',
                    formatter: "{a} <br/>{b} : {c} ({d}%)"
                },
                legend: {
                    orient : 'vertical',
                    x : 'left',
                    padding:[30,0,0,0],
                    data: classif
                },
                toolbox: {
                    show : true,
                    x : 700,
                    feature : {
                        mark : {show: true},
                        dataView : {show: true, readOnly: false},
                        magicType : {
                            show: true,
                            type: ['pie', 'funnel'],
                            option: {
                                funnel: {
                                    x: '25%',
                                    width: '50%',
                                    funnelAlign: 'left',
                                    max: 1548
                                }
                            }
                        },
                        restore : {show: true},
                        saveAsImage : {
                            show: true,
                            pixelRatio: 7
                        }
                    }
                },
                calculable : true,
                series : [
                    {
                        name:'',
                        type:'pie',
                        radius : '55%',
                        center: ['50%', '60%'],
                        data: data_if
                    }
                ]
            };
            myChart.setOption(plot_option);
        };
        rawpieShow("tian_FKDO230350531-1A_AHWN3FDSX5-new_L1");
        $(function() {
            $("#pageUp").click(function(){
                let downNode = this.nextElementSibling;
                let selectNode = this.parentNode.firstElementChild.firstElementChild;
                if (selectNode.selectedIndex == 0){
                    this.style.visibility = 'hidden';
                }else{
                    selectNode.selectedIndex = selectNode.selectedIndex - 1;
                    rawpieShow(selectNode.options[selectNode.selectedIndex].innerHTML);
                    downNode.style.visibility = 'visible';
                };
            });
            $("#pageDown").click(function(){
                let upNode = this.previousElementSibling;
                let selectNode = this.parentNode.firstElementChild.firstElementChild;
                if ( selectNode.selectedIndex == selectNode.options.length - 1){
                    this.style.visibility = 'hidden';
                }else{
                    selectNode.selectedIndex = selectNode.selectedIndex + 1;
                    rawpieShow(selectNode.options[selectNode.selectedIndex].innerHTML);
                    upNode.style.visibility = 'visible';
                }
            });
                        $("#selectPointOfInterest").change(function(){
                            let upNode = this.parentNode.nextElementSibling;
                            let downNode = upNode.nextElementSibling;
                            upNode.style.visibility = 'visible';
                            downNode.style.visibility = 'visible';
                        });
        });
    </script>
</body>
</html>
